(this.webpackJsonpprac=this.webpackJsonpprac||[]).push([[0],{14:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(5),r=n.n(a),c=n(3),o=n.n(c),u=n(6),l=n(7),i=(n(4),n(0));var d=function(e){var t=e.task,n=e.handlers;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"task-wrapper",children:[Object(i.jsx)("h1",{children:t.name.replace("~"," ")}),Object(i.jsxs)("div",{className:"buttons",children:[Object(i.jsx)("button",{onClick:function(){return n.completeIncompleteTask(t.name)},className:"green-btn",children:t.completed?"Incomplete":"Complete"}),Object(i.jsx)("button",{className:"red-btn",style:{display:t.completed?"block":"none"},onClick:function(){return n.deleteTask(t.name)},children:"Delete Task"})]})]})})};var f=function(e){var t=e.username,n=e.handlers,a=Object(s.useRef)(),r=Object(s.useRef)();return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"create-task-wrapper",children:[Object(i.jsxs)("div",{className:"logged-section",children:[Object(i.jsxs)("span",{children:["Username: ",t]}),Object(i.jsxs)("div",{className:"logged-btns-wrapper",children:[Object(i.jsx)("button",{id:"logout",onClick:n.logOut,className:"logged-btn red-btn",children:"Log Out"}),Object(i.jsx)("button",{id:"delete-account",onClick:n.deleteAccount,className:"logged-btn red-btn",children:"Delete Account"})]})]}),Object(i.jsx)("input",{ref:a,type:"text",onKeyUp:function(e){"Enter"===e.code&&""!==a.current.value&&r.current.click()},placeholder:"Type the task name here..."}),Object(i.jsxs)("div",{className:"buttons",children:[Object(i.jsx)("button",{ref:r,onClick:function(){n.createTask(a.current.value),a.current.value=null},className:"create-task green-btn",children:"Create Task"}),Object(i.jsx)("button",{className:"red-btn",onClick:function(){return n.deleteAllTasks()},id:"delete-all-tasks",children:"Delete All Tasks"})]})]})})};var m=function(e){var t=e.handlers,n=Object(s.useRef)(),a=Object(s.useRef)(),r=Object(s.useRef)();return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"login-page",children:Object(i.jsxs)("div",{className:"login-card",children:[Object(i.jsx)("h1",{children:"LOGIN / SIGN UP"}),Object(i.jsx)("input",{onKeyUp:function(e){"Enter"===e.key&&r.current.click()},ref:n,className:"input-field username-field",type:"text",placeholder:"Username",autocomplete:"new-password"}),Object(i.jsx)("input",{onKeyUp:function(e){"Enter"===e.key&&r.current.click()},ref:a,className:"input-field password-field",type:"password",placeholder:"Password",autocomplete:"off"}),Object(i.jsxs)("div",{className:"btns-wrapper",children:[Object(i.jsx)("button",{ref:r,onClick:function(){return t.login(n.current.value,a.current.value)},type:"button",className:"btn btn-outline-success",children:"Login"}),Object(i.jsx)("button",{onClick:function(){return t.signup(n.current.value,a.current.value)},className:"btn btn-outline-secondary",children:"Sign Up"})]}),Object(i.jsx)("label",{id:"warnings-label"})]})})})},p="taskUser.app";var j=function(){var e=Object(s.useState)({userInfo:{username:"",password:""},tasks:[]}),t=Object(l.a)(e,2),n=t[0],a=t[1];function r(){return(r=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,""===t.username){e.next=5;break}return e.next=4,fetch("/login/".concat(t.username,"/").concat(t.password,"/gettasks")).then((function(e){return 200===e.status&&e.json()}));case 4:n=e.sent;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){a({userInfo:{username:"",password:""},tasks:[]}),localStorage.setItem(p,JSON.stringify({username:"",password:""}))}Object(s.useEffect)((function(){var e=JSON.parse(localStorage.getItem(p));e&&function(e){return r.apply(this,arguments)}(e).then((function(t){!1!==t&&a({userInfo:e,tasks:t})}))}),[]),Object(s.useEffect)((function(){""!==n.userInfo.username&&(localStorage.setItem(p,JSON.stringify(n.userInfo)),function(){var e=JSON.stringify({tasks:n.tasks});fetch("/login/".concat(n.userInfo.username,"/").concat(n.userInfo.password,"/settasks"),{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:e})}())}),[n]);var j={deleteTask:function(e){if(n.tasks.find((function(t){return t.name===e}))){var t=n.tasks.filter((function(t){return t.name!==e}));a({userInfo:n.userInfo,tasks:t})}},createTask:function(e){if(""===e||n.tasks.find((function(t){return t.name===e})))alert("Invalid task name!");else{var t=n.tasks;t.push({name:e,completed:!1}),a({userInfo:n.userInfo,tasks:t})}},deleteAllTasks:function(){n.tasks.length>0?window.confirm("Are you sure you want to delete all tasks?")&&a({userInfo:n.userInfo,tasks:[]}):alert("There are no tasks to delete!")},completeIncompleteTask:function(e){if(n.tasks.find((function(t){return t.name===e}))){var t=n.tasks;t.map((function(t){t.name===e&&(t.completed=!t.completed)})),a({userInfo:n.userInfo,tasks:t})}},login:function(e,t){if(""!==e&&""!==t){var n=document.getElementById("warnings-label");n.innerText="",fetch("/login/".concat(e,"/").concat(t,"/gettasks")).then((function(e){return 404===e.status?(n.innerText="Wrong Credentials!",setTimeout((function(){return n.innerText=""}),4e3),null):e.json()})).then((function(s){null!=s&&(n.innerText="Welcome ".concat(e,"!"),setTimeout((function(){return a({userInfo:{username:e,password:t},tasks:s})}),2e3))}))}},signup:function(e,t){var n=document.getElementById("warnings-label");fetch("/signup/".concat(e,"/").concat(t),{method:"post"}).then((function(e){200===e.status?(n.innerText="The registration was successful! You may login now.",setTimeout((function(){return n.innerText=""}),4e3)):409===e.status?(n.innerText="That username already exists!",setTimeout((function(){return n.innerText=""}),4e3)):400===e.status&&(n.innerText='Username and Password need at least 5 characters and can\xb4t contain any of these special characters :\n []?\xab|!"\xba\xaa~^\xb4`*+-:;,<>=)(/&%$#{}\u20ac\xa3\xa7 ',setTimeout((function(){return n.innerText=""}),12e3))}))},logOut:c,deleteAccount:function(){console.log("HANDLE DELETE"),window.confirm("Are you sure you want to delete your account?")&&fetch("/delete/".concat(n.userInfo.username,"/").concat(n.userInfo.password)).then((function(e){console.log(e),200===e.status&&c()}))}};return Object(i.jsx)(i.Fragment,{children:n.userInfo.username.length?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(f,{username:n.userInfo.username,handlers:j}),Object(i.jsxs)("div",{className:"incomplete-tasks",children:[Object(i.jsx)("h1",{className:"title",children:"INCOMPLETE TASKS"}),n.userInfo.username?n.tasks.map((function(e){if(!e.completed)return Object(i.jsx)(d,{task:e,handlers:j},e.name)})):null]}),Object(i.jsxs)("div",{className:"complete-tasks",children:[Object(i.jsx)("h1",{className:"title",children:"COMPLETE TASKS"}),n.userInfo.username?n.tasks.map((function(e){if(e.completed)return Object(i.jsx)(d,{task:e,handlers:j},e.name)})):null]})]}):Object(i.jsx)(m,{handlers:j})})};r.a.render(Object(i.jsx)(j,{}),document.getElementById("root"))},4:function(e,t,n){}},[[14,1,2]]]);
//# sourceMappingURL=main.4060b296.chunk.js.map